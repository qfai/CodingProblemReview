### algorithm

### **海量数据问题**

- 十亿整数（随机生成，可重复）中前K最大的数

类似问题的解决方法思路：首先哈希将数据分成N个文件，然后对每个文件建立K个元素最小/大堆（根据要求来选择）。最后将文件中剩余的数插入堆中，并维持K个元素的堆。最后将N个堆中的元素合起来分析。可以采用归并的方式来合并。在归并的时候为了提高效率还需要建一个N个元素构成的最大堆，先用N个堆中的最大值填充这个堆，然后就是弹出最大值，指针后移的操作了。当然这种问题在现在的互联网技术中，一般就用map-reduce框架来做了。

大数据排序相同的思路：先哈希（哈希是好处是分布均匀，相同的数在同一个文件中），然后小文件装入内存快排，排序结果输出到文件。最后建堆归并。



- **十亿整数（随机生成，可重复）中出现频率最高的一千个**


- 大量数据去重：Bitmap和布隆过滤器(Bloom Filter): 一个32bit的数，可以用2^32的bool来表示，但是随着数字变大，用bloom filter，K 个hash函数，m位bitmap,当某个数出现，将k个hash值的bitmap置为1。 有可能会有错误

### 位运算

1. 对于正整数，左移一位，就是将数值乘2；右移一位就运算数值除2；但是位操作的效率要比运算符高。
2. 一个数和另一个数异或两次得到的还是原来的数，eg.不用临时变量交换两个整数。
3. n & (n - 1)将整数n的最后一位为1的位变成0。 eg.统计一个整数中二进制位上1的个数。判断一个数是不是2的幂。
4. n & (~n + 1)提取出整数n最后一位为1的数 .eg. 统计一个整数中二进制位上1的个数。
5. 不使用+，-，*，/完成整数相加